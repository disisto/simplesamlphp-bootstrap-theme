/*!
 * SimpleSAMLphp Bootstrap Theme v0.4.0
 * Copyright (c) 2023-2025 Roberto Di Sisto
 * Licensed under MIT (https://github.com/disisto/simplesamlphp-bootstrap-theme/blob/main/LICENSE)
 */
!function(){"use strict";const t={tooltips:new Map,init(){document.querySelectorAll("[data-copy-text]").forEach(e=>{const t=new bootstrap.Tooltip(e,{placement:"top",title:"Copy to clipboard",trigger:"hover"});this.tooltips.set(e,t),e.addEventListener("click",t=>{t.preventDefault(),this.copyToClipboard(e)})})},copyToClipboard(t){const e=t.getAttribute("data-copy-text"),i=this.tooltips.get(t),o=t=>{t.clipboardData.setData("text/html",e),t.clipboardData.setData("text/plain",e),t.preventDefault()};document.addEventListener("copy",o),document.execCommand("copy"),document.removeEventListener("copy",o),i&&i.hide();const n=new bootstrap.Tooltip(t,{placement:"top",title:"Copied!",animation:!0});n.show();const s=document.getElementById("copyIcon");if(s){const t=s.innerHTML;s.innerHTML='<use href="#check2"></use>',setTimeout(()=>{s.innerHTML=t,n.dispose()},1200)}else setTimeout(()=>{n.dispose()},1200)}},e={init(){const t=document.querySelector(".password-wrapper");if(!t)return;const e=t.querySelector("#password"),i=t.querySelector(".password-toggle");e&&i&&(i.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.toggle(e,i)}),i.addEventListener("keydown",t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),this.toggle(e,i))}))},toggle(t,e){const i=e.querySelector(".eye-icon use");if(!i)return;"password"===t.type?(t.type="text",i.setAttribute("href","#eye-slash"),e.setAttribute("aria-label","Hide password"),e.setAttribute("aria-pressed","true")):(t.type="password",i.setAttribute("href","#eye"),e.setAttribute("aria-label","Show password"),e.setAttribute("aria-pressed","false")),t.focus();const o=t.value.length;t.setSelectionRange(o,o)}},i={storageKey:"theme",defaultTheme:"dark",init(){const t=this.getStoredTheme();this.setTheme(t);const e=document.querySelector("#bd-theme-toggle");e&&e.addEventListener("click",()=>{const t=this.getStoredTheme(),e="dark"===t?"light":"dark";this.setStoredTheme(e),this.setTheme(e)})},getStoredTheme(){return localStorage.getItem(this.storageKey)||this.defaultTheme},setStoredTheme(t){localStorage.setItem(this.storageKey,t)},setTheme(t){document.documentElement.setAttribute("data-bs-theme",t);const e=document.querySelector("#bd-theme-toggle");if(!e)return;const i=e.querySelector(".theme-icon-active use");i&&i.setAttribute("href","dark"===t?"#moon-stars-fill":"#sun-fill"),e.setAttribute("aria-label",`Switch to ${"dark"===t?"light":"dark"} theme`)}},o={init(){document.querySelectorAll("[data-language-select]").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),this.selectLanguage(t)})})},selectLanguage(t){const e=t.getAttribute("data-language-select"),i=document.getElementById("language-selector"),o=t.closest("form");i&&o&&(i.value=e,o.submit())}},n={init(){document.querySelectorAll("form.needs-validation").forEach(t=>{t.addEventListener("submit",e=>{if(t.checkValidity()){const t=e.target.querySelector('[type="submit"]');if(t){const e=t.getAttribute("data-processing");e&&(t.textContent=e),t.disabled=!0}}else e.preventDefault(),e.stopPropagation();t.classList.add("was-validated")})}),document.querySelectorAll(".alert-dismissible").forEach(t=>{setTimeout(()=>{new bootstrap.Alert(t).close()},1e4)})}},s=()=>{i.init(),o.init(),t.init(),e.init(),n.init(),("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)&&console.log("SimpleSAMLphp Bootstrap Theme initialized")};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s(),window.SimpleSAMLTheme={Clipboard:t,PasswordToggle:e,ThemeToggle:i,LanguageSelector:o,FormUtils:n,version:"0.4.0"}}();
